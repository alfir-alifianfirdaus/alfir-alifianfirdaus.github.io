<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Undangan Pernikahan Bayou & Rani</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Sacramento&family=Tangerine:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Cormorant:ital,wght@0,300..700;1,300..700&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Sen:wght@400..800&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="style.css" />

    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />

    <style>
      html {
        /* scroll-behavior: smooth; <-- Ini akan kita kelola dengan JS */
        overflow: hidden; /* Akan diaktifkan oleh JS saat tombol 'Buka Undangan' diklik */
      }
      body {
        margin: 0;
        padding: 0;
      }
    </style>
  </head>

  <body>
    <section id="hero" class="hero">
      <div class="hero-container">
        <h2>The Wedding of</h2>
        <h1>Bayou & Rani</h1>
        <p>dua jiwa berbeda mengikat janji suci bersatu dalam cinta</p>
        <h4>Kepada Yth. <br />Bapak/Ibu/Saudara/i</h4>
        <a href="#main-content" class="btn" id="open-invitation-btn"
          >Buka Undangan</a
        >
      </div>
    </section>

    <main id="main-content">
      <section class="ayat-section">
        <div class="card-ayat">
          <p>
            "Dan di antara tanda-tanda kebesaran-Nya (Allah) ialah Dia
            menciptakan pasangan-pasangan untukmu dari jenismu sendiri, agar
            kamu cenderung dan merasa tentram kepadanya, dan Dia menjadikan di
            antaramu rasa kasih dan sayang. Sungguh, pada yang demikian itu
            benar-benar terdapat tanda-tanda (kebesaran) Allah bagi kaum yang
            berpikir."
          </p>
          <h5>QS Ar-Rum : 21</h5>
        </div>
      </section>

      <section class="info-section">
        <div class="konten">
          <div class="pembuka">
            <h3>Assalamu'alaikum Warahmatullahi Wabarakatuh</h3>
            <p>
              Dengan memohon Rahmat dan Ridho Allah SWT kami bermaksud untuk
              mengundang Bapak/Ibu/Saudara/i untuk menghadiri acara pernikahan
              kami:
            </p>
          </div>
          <div class="nama">
            <h2>Ahmad Bayou Damara, S.T.</h2>
            <p>
              Putra Pertama dari <br />
              Bapak H. Ahmad dan Ibu Hj. Siti
            </p>
            <span class="ampersand">&</span>
            <h2>drg. Silvia Rani Anggraini</h2>
            <p>
              Putri Pertama dari <br />
              Bapak H. Budi dan Ibu Hj. Ani
            </p>
          </div>
          <div class="acara">
            <div class="akad">
              <h4>AKAD NIKAH</h4>
              <p>
                <span>Hari/Tanggal :</span><br />
                Sabtu, 25 November 2023<br />
                <span>Waktu :</span><br />
                Pukul 09.00 WIB<br />
                <span>Tempat :</span><br />
                Masjid Nasional Al-Akbar Surabaya, Jl. Pagesangan No. 1,
                Surabaya
              </p>
              <a
                href="https://maps.app.goo.gl/tjJqCvX2QzNzRWc1A"
                target="_blank"
                class="map external-link"
                >Lokasi Akad</a
              >
            </div>
            <div class="resepsi">
              <h4>RESEPSI</h4>
              <p>
                <span>Hari/Tanggal :</span><br />
                Sabtu, 25 November 2023<br />
                <span>Waktu :</span><br />
                Pukul 12.00 - 16.00 WIB<br />
                <span>Tempat :</span><br />
                Gedung Serbaguna Masjid Al-Akbar, Jl. Pagesangan No.1, Surabaya
              </p>
              <a
                href="https://maps.app.goo.gl/tjJqCvX2QzNzRWc1A"
                target="_blank"
                class="map external-link"
                >Lokasi Resepsi</a
              >
            </div>
          </div>
        </div>
      </section>

      <section class="closing-section">
        <div class="penutup">
          <p>
            Kami sangat berharap kehadiran Bapak/Ibu/Saudara/i untuk memberikan
            doa restu kepada kami. Atas kehadiran dan doa restunya, kami ucapkan
            terima kasih.
          </p>
          <h5>Wassalamu'alaikum Warahmatullahi Wabarakatuh</h5>
        </div>
      </section>

      <section class="gallery-section">
        <div class="galeri">
          <h2>Galeri</h2>
          <div class="galeri-container">
            <img
              src="image/hiroback.jpg"
              class="foto"
              alt="Galeri 1"
              data-aos="fade-up"
              data-aos-duration="1000"
            />
            <img
              src="image/hiroback.jpg"
              class="foto"
              alt="Galeri 2"
              data-aos="fade-up"
              data-aos-duration="1000"
              data-aos-delay="100"
            />
            <img
              src="image/hiroback.jpg"
              class="foto"
              alt="Galeri 3"
              data-aos="fade-up"
              data-aos-duration="1000"
              data-aos-delay="200"
            />
            <img
              src="image/hiroback.jpg"
              class="foto"
              alt="Galeri 4"
              data-aos="fade-up"
              data-aos-duration="1000"
              data-aos-delay="300"
            />
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div class="footer-container">
        <p>Â© 2023 Bayou & Rani Wedding. All rights reserved.</p>
        <span>
          Designed by
          <a
            href="https://instagram.com/alfir.card"
            target="_blank"
            class="external-link"
            >AlFir-Card</a
          >
        </span>
      </div>
    </footer>

    <audio id="background-music" loop>
      <source src="musik/backsound.mp3" type="audio/mpeg" />
      Your browser does not support the audio element.
    </audio>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const openBtn = document.getElementById("open-invitation-btn");
        const bgMusic = document.getElementById("background-music");
        const htmlElement = document.documentElement; // Mengacu pada tag <html>
        let isMusicPlayingInitiated = false; // Flag untuk melacak apakah musik pernah diputar oleh pengguna

        // Fungsi untuk melakukan smooth scroll secara kustom
        function customSmoothScroll(targetId, duration) {
          const targetElement = document.getElementById(targetId);
          if (!targetElement) return;

          const startPosition = window.pageYOffset;
          const targetPosition =
            targetElement.getBoundingClientRect().top + window.pageYOffset;
          const distance = targetPosition - startPosition;
          let startTime = null;

          function animation(currentTime) {
            if (startTime === null) startTime = currentTime;
            const timeElapsed = currentTime - startTime;
            const run = easeInOutQuad(
              timeElapsed,
              startPosition,
              distance,
              duration
            );
            window.scrollTo(0, run);
            if (timeElapsed < duration) requestAnimationFrame(animation);
          }

          // Fungsi easing (membuat animasi lebih halus dari linear)
          function easeInOutQuad(t, b, c, d) {
            t /= d / 2;
            if (t < 1) return (c / 2) * t * t + b;
            t--;
            return (-c / 2) * (t * (t - 2) - 1) + b;
          }

          requestAnimationFrame(animation);
        }

        // Fungsi yang dipanggil saat tombol "Buka Undangan" diklik
        function activateContentAndScroll() {
          htmlElement.style.overflow = "auto"; // Mengaktifkan scroll
          if (bgMusic) {
            bgMusic
              .play()
              .then(() => {
                isMusicPlayingInitiated = true; // Musik berhasil diputar
              })
              .catch((e) => console.error("Error playing music:", e));
          }
          openBtn.removeEventListener("click", activateContentAndScroll);

          // Panggil custom smooth scroll
          customSmoothScroll("main-content", 1500); // 1500ms = 1.5 detik

          AOS.init({
            duration: 1000,
            once: true,
          });
        }

        // Tambahkan event listener ke tombol "Buka Undangan"
        if (openBtn) {
          openBtn.addEventListener("click", function (event) {
            event.preventDefault();
            activateContentAndScroll(); // Panggil fungsi baru ini
          });
        }

        // --- Bagian Perbaikan: Mengelola Musik berdasarkan Visibilitas Tab (tetap sama) ---
        document.addEventListener("visibilitychange", function () {
          if (bgMusic && isMusicPlayingInitiated) {
            if (document.hidden) {
              bgMusic.pause();
            } else {
              bgMusic
                .play()
                .catch((e) => console.error("Error resuming music:", e));
            }
          }
        });

        // --- Bagian untuk Menghentikan Musik saat Link Eksternal Diklik (tetap sama) ---
        const externalLinks = document.querySelectorAll('a[target="_blank"]');

        externalLinks.forEach((link) => {
          link.addEventListener("click", function () {
            if (bgMusic && !bgMusic.paused) {
              bgMusic.pause();
            }
          });
        });
      });
    </script>
  </body>
</html>
